@using ReviewMe.Common.Extensions
@using ReviewMe.ViewModel
@using ReviewMe.Web.Controllers
@*@model ReviewMe.ViewModel.ReviewDetailsViewModel*@

@{
    ViewBag.Title = "ReviewDetails";
    Layout = "../Shared/_Layout.cshtml";
}

<input id="RevieweeId" type="hidden" value='@ViewBag.RevieweeId' />

<link href="~/Content/fullcalendar.min.css" rel="stylesheet" />

<style type="text/css">
    .dayreview {
        /*left: 156px;*/
        border-color: rgb(154, 45, 45);
        color: rgb(255, 255, 255);
        width: 120px;
        /*top: 25px;*/
        background-color: rgb(154, 45, 45);
        border-right-width: 1px;
        border-top-right-radius: 3px;
        border-bottom-right-radius: 3px;
    }
</style>

<script src="~/Scripts/moment.min.js"></script>
<script src="~/Scripts/fullcalendar.js"></script>

<ul class="breadcrumb breadcrumb-page">
    <div class="breadcrumb-label text-light-gray">You are here: </div>
    <li><a href="#">Home</a></li>
    <li class="active"><a href="#">My Reviewees</a></li>
</ul>
<div id='calendar'>

</div>

<div id="userAddReviewDetails" class="modal  fade" tabindex="-1" role="dialog" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" id="userAddEditModalBody">
        </div>
    </div>
</div>

<script src="~/Scripts/Custom/ReviewDetails.js"></script>
<script type="text/javascript">
    var deletedItem = null;
    //DON'T MOVE THIS CODE IN JS FILE,VIEWBAG VAlUE CAN'T ACCESS IN JS FILE.
    $('#calendar').fullCalendar({
        defaultView: 'month',
        editable: true,
        selectable: true,
        //header and other values
        select: function (start, end, allDay) {
            var endtime = end;
            var starttime = start;
            var mywhen = starttime + ' - ' + endtime;
            $('#createEventModal #apptStartTime').val(start);
            $('#createEventModal #apptEndTime').val(end);
            $('#createEventModal #apptAllDay').val(allDay);
            $('#createEventModal #when').text(mywhen);
        },
        dayClick: function () {

            $('#userAddReviewDetails').modal({
                backdrop: 'static',
                keyboard: false
            });
            deletedItem = $(this);

            $.ajax({
                url: "/ReviewMap/AddEditReviewDetails",
                type: "GET",
                data: { 'revieweeDate': $(this).attr('data-date'), 'revieweeId': $('#RevieweeId').val() },
                success: function (data) {             
                    $('#userAddEditModalBody').empty();
                    $('#userAddEditModalBody').append(data);
                },
                error: function (data) {
                  
                }
            });
        }
    });

    $('#calendar').find('.fc-left h2').text('@ViewBag.RevieweeName -' + $('#calendar').find('.fc-left h2').text());

    //Added By : Ramchandra rane
    function clearDeletedItemText()
    {     
        deletedItem.text("");      
    }

</script>